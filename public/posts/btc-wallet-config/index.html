<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#333">
	<meta name="msapplication-TileColor" content="#333">
<meta itemprop="name" content="Configuring your Urbit Bitcoin wallet">
<meta itemprop="description" content="The day has finally arrived: May 27 saw a major update to Urbit, and the public release of a bitcoin wallet and the ability to send and receive payments. Your ship provides an identity layer on top of bitcoin &ndash; you can tell your planet to send money to ~sampel-palnet, and Urbit takes care of the rest. Think CashApp &ndash; enter a handle, send money &ndash; but you own the whole stack.">
<meta itemprop="datePublished" content="2021-05-28T21:15:07-05:00" />
<meta itemprop="dateModified" content="2021-05-28T21:15:07-05:00" />
<meta itemprop="wordCount" content="810">
<meta itemprop="image" content="https://subject.network/img/btc-prov.jpg">



<meta itemprop="keywords" content="urbit,bitcoin,btc-wallet,btc-provider,little-wolfur,silnem," />
<meta property="og:title" content="Configuring your Urbit Bitcoin wallet" />
<meta property="og:description" content="The day has finally arrived: May 27 saw a major update to Urbit, and the public release of a bitcoin wallet and the ability to send and receive payments. Your ship provides an identity layer on top of bitcoin &ndash; you can tell your planet to send money to ~sampel-palnet, and Urbit takes care of the rest. Think CashApp &ndash; enter a handle, send money &ndash; but you own the whole stack." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://subject.network/posts/btc-wallet-config/" />
<meta property="og:image" content="https://subject.network/img/btc-prov.jpg" />
<meta property="article:published_time" content="2021-05-28T21:15:07-05:00" />
<meta property="article:modified_time" content="2021-05-28T21:15:07-05:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://subject.network/img/btc-prov.jpg"/>

<meta name="twitter:title" content="Configuring your Urbit Bitcoin wallet"/>
<meta name="twitter:description" content="The day has finally arrived: May 27 saw a major update to Urbit, and the public release of a bitcoin wallet and the ability to send and receive payments. Your ship provides an identity layer on top of bitcoin &ndash; you can tell your planet to send money to ~sampel-palnet, and Urbit takes care of the rest. Think CashApp &ndash; enter a handle, send money &ndash; but you own the whole stack."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Configuring your Urbit Bitcoin wallet</title>
	<link rel="stylesheet" href="https://subject.network/css/style.min.5f66d6bd6751a10ba7350142ac010f4e4c42b5a3f628c93bde75a9a19d70ad5c.css" integrity="sha256-X2bWvWdRoQunNQFCrAEPTkxCtaP2KMk73nWpoZ1wrVw=" crossorigin="anonymous">
	<link rel="stylesheet" href="https://subject.network/css/override.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					‚è£ <a href="https://subject.network">networked subject</a>_
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://subject.network/posts/">Posts</a>
				<a href="https://subject.network/about/">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons"><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://subject.network/posts/">Posts</a></li>
			<li><a href="https://subject.network/about/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>May 28, 2021</span></div>
				<h1>Configuring your Urbit Bitcoin wallet</h1>
			</header>
			<div class="content">
				<p><img src="/img/btc-prov.jpg" alt=""></p>
<p>The day has finally arrived: May 27 saw a major update to Urbit, and the public release of a bitcoin wallet and the ability to send and receive payments. Your ship provides an identity layer on top of bitcoin &ndash; you can tell your planet to send money to <code>~sampel-palnet</code>, and Urbit takes care of the rest. Think CashApp &ndash; enter a handle, send money &ndash; but you own the whole stack.</p>
<p>Urbit&rsquo;s implementation derives an xPub address from your ship&rsquo;s master ticket. An xPub (extended public key) is like a seed to generate new addresses for every transaction &ndash; what is called a hierarchical deterministic wallet (HD wallet). Your ship&rsquo;s master ticket is cryptographic proof of ownership of your address on the network, and is now the seed for all the bitcoin addresses you will generate in the course of transacting. On top of systemic elegance, this is a great boon to financial privacy &ndash; by creating a different address every time you receive funds, it makes it much more difficult for an observer to tell how much money you have or who is sending it to you. By connecting to a node you trust or run yourself, nobody sees a connection between wallet addresses and IP addresses. Urbit takes care of all of this transparently.</p>
<p>Urbit&rsquo;s bitcoin implementation is pretty straightforward to understand. A provider runs a full node with a specific stack of bitcoin software. The provider then configures <code>%btc-provider</code> on a ship to relay information to and from the full node. Normal pilots run <code>%btc-wallet</code> on their ships, and point the wallet at the provider&rsquo;s ship. Your ship&rsquo;s wallet talks to your provider, and your provider talks to the full node.</p>
<p><img src="/img/btc/prov.jpg" alt=""></p>
<p>This tutorial has two halves &ndash;  connecting a ship to a provider, and connecting your provider to an operational full node. If you do not already have an Electrs full node stack set up, see the <a href="/posts/pi-fullnode-urbit/#bitcoind">previous bitcoin tutorial</a> for instructions. If you are just trying to connect your wallet to an existing provider, you can skip the second section.</p>
<h2 id="connecting-a-ship-to-a-provider">Connecting a ship to a provider<a href="#connecting-a-ship-to-a-provider" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>If you just want to connect your ship to somebody&rsquo;s provider, the process is very simple.</p>
<p>Start your wallet:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - ~/urbit/sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;|start&nbsp;%btc-wallet</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p><img src="/img/btc/icon.png" alt=""></p>
<p>A bright orange bitcoin tile will appear in Landscape next to your clock &ndash; click on it, and enter the <code>@p</code> of your provider.</p>
<p><img src="/img/btc/provnode.png" alt=""></p>
<p>This means it&rsquo;s working üôÇ</p>
<p>You will be prompted for your master ticket (you only have to set this up one time). Your master ticket will allow you to derive your xPub key.</p>
<p>If you do not have a master ticket, for instance if your ship is on a hardware wallet, you can bypass this option and provide an xPub from an existing wallet (instructions for <a href="https://wiki.trezor.io/User_manual:Displaying_account_public_key_(XPUB)">Trezor</a>, <a href="https://support.ledger.com/hc/en-us/articles/360011069619-Extended-public-key">Ledger</a> &ndash; note that some people have experienced issues with importing external xPubs).</p>
<p>Paste in your xPub key and proceed. Once you can see your balance, you&rsquo;re good to go! You now have a bitcoin wallet on your ship. You can send money to other ships without knowing anything about their wallet addresses, and you will automatically create a new address for every transaction you receive.</p>
<p>If you need to change your provider from the dojo, you can use this one-liner syntax (thanks <code>~silnem</code>!):</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - ~/urbit/sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;:btc-wallet|command&nbsp;[%set-provider&nbsp;[~&nbsp;~sampel]]</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<h2 id="connecting-a-provider-to-a-full-node">Connecting a provider to a full node<a href="#connecting-a-provider-to-a-full-node" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>Before you start, make sure TCP port 50002 ingress is allowed for your node &ndash; disable any firewall for that port, and set up port forwarding if your node is on a home network and remote from your provider ship. Once your full node is stood up, synced and connectable, you can connect your provider to it from the dojo. For these commands, replace <code>~sampel</code> with your provider ship&rsquo;s <code>@p</code>.</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - ~/urbit/sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;=provider&nbsp;~sampel</li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;=network&nbsp;%main</li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;|start&nbsp;%btc-wallet</li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;|start&nbsp;%btc-provider</li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;:btc-wallet|command&nbsp;[%set-provider&nbsp;provider]</li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;:btc-provider|command&nbsp;[%set-credentials&nbsp;api-url='http://full.node.address.here:50002'&nbsp;network]</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p><img src="/img/btc/1.png" alt=""></p>
<p>Return to <code>~sampel</code>'s Landscape and note the new bitcoin tile!</p>
<p>Let&rsquo;s test it &ndash; click the tile and enter the provider&rsquo;s <code>@p</code>. Follow the instructions in the previous section to get your xPub address from Bridge or another wallet.</p>
<p>If you want to whitelist your ship&rsquo;s <code>%kids</code> (ie planets your star has spawned or your moons), enter:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - ~/urbit/sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;:btc-provider|command&nbsp;[%add-whitelist&nbsp;%kids&nbsp;~]</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p>To whitelist a specific ship, enter:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - ~/urbit/sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;:btc-provider|command&nbsp;[%add-whitelist&nbsp;[%users&nbsp;users=(sy&nbsp;~[~wallet-hodler])]]</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p>&hellip;replacing <code>~wallet-hodler</code> with another <code>@p</code>.</p>
<p>To whitelist all members of a group, enter:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - ~/urbit/sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;:btc-provider|command&nbsp;[%add-whitelist&nbsp;[%groups&nbsp;groups=(sy&nbsp;~[[~sampel&nbsp;%group-name]])]]</li>
        
        
        <li>&nbsp;</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p>&hellip;replacing <code>%group-name</code> as well as the host ship.</p>
<p>Once a whitelisted client adds you as a provider, it is printed in the dojo:</p>
<p><img src="/img/btc/2.png" alt=""></p>
<hr>
<p>By the way, I have to brag &ndash; I am pretty sure I set up the first operational provider on the livenet, and facilitated its first transaction; a few weeks in February well-spent!</p>
<p><img src="/img/btc/4.png" alt=""></p>
<hr>
<p><em>This post is also available on Urbit, where you can post comments. Join <a href="web+urbitgraph://group/~matwet/networked-subject/">~matwet/networked-subject</a> and open the Networked Subject notebook.</em></p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://subject.network/tags/urbit">urbit</a></span><span class="tag"><a href="https://subject.network/tags/bitcoin">bitcoin</a></span><span class="tag"><a href="https://subject.network/tags/btc-wallet">btc-wallet</a></span><span class="tag"><a href="https://subject.network/tags/btc-provider">btc-provider</a></span><span class="tag"><a href="https://subject.network/tags/little-wolfur">little-wolfur</a></span><span class="tag"><a href="https://subject.network/tags/silnem">silnem</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2021-05-28 21:15 -0500</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="https://subject.network/posts/topiary/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Essay: A Topiary</span>
			</a>
			<a class="prev-post" href="https://subject.network/posts/urbit-windows-binaries/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>Building native Windows Urbit binaries</span>
			</a>
		</div>
		<div id="comments" class="thin">
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="/img/by-sa.svg" height=24px width=auto></a><p> 2021 <img src="/sitful-hatred.svg" height=24px width=24px style="vertical-align:middle;"><a href="https://subject.network">~sitful-hatred</a>
		</p>
	</footer>



	<script src="https://subject.network/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js" integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin="anonymous"></script>
	

</body>

</html>
