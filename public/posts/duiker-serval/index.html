<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#333">
	<meta name="msapplication-TileColor" content="#333">
<meta itemprop="name" content="%duiker &amp; %serval: bittorrent on Urbit">
<meta itemprop="description" content="duiker/serval is a software suite for running an Urbit-native bittorrent tracker.">
<meta itemprop="datePublished" content="2020-10-10T17:32:53-05:00" />
<meta itemprop="dateModified" content="2020-10-10T17:32:53-05:00" />
<meta itemprop="wordCount" content="828">
<meta itemprop="image" content="https://subject.network/img/duikers.jpg">



<meta itemprop="keywords" content="urbit,bittorrent,tracker,palfun-foslup,paldev," />
<meta property="og:title" content="%duiker &amp; %serval: bittorrent on Urbit" />
<meta property="og:description" content="duiker/serval is a software suite for running an Urbit-native bittorrent tracker." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://subject.network/posts/duiker-serval/" />
<meta property="og:image" content="https://subject.network/img/duikers.jpg" />
<meta property="article:published_time" content="2020-10-10T17:32:53-05:00" />
<meta property="article:modified_time" content="2020-10-10T17:32:53-05:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://subject.network/img/duikers.jpg"/>

<meta name="twitter:title" content="%duiker &amp; %serval: bittorrent on Urbit"/>
<meta name="twitter:description" content="duiker/serval is a software suite for running an Urbit-native bittorrent tracker."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>%duiker &amp; %serval: bittorrent on Urbit</title>
	<link rel="stylesheet" href="https://subject.network/css/style.min.5f66d6bd6751a10ba7350142ac010f4e4c42b5a3f628c93bde75a9a19d70ad5c.css" integrity="sha256-X2bWvWdRoQunNQFCrAEPTkxCtaP2KMk73nWpoZ1wrVw=" crossorigin="anonymous">
	<link rel="stylesheet" href="https://subject.network/css/override.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					‚è£ <a href="https://subject.network">networked subject</a>_
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://subject.network/posts/">Posts</a>
				<a href="https://subject.network/about/">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons"><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://subject.network/posts/">Posts</a></li>
			<li><a href="https://subject.network/about/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Oct 10, 2020</span></div>
				<h1>%duiker &amp; %serval: bittorrent on Urbit</h1>
			</header>
			<div class="content">
				<p><a href=""><img src="/img/duikers.jpg" alt=""></a></p>
<p>%duiker/%serval is a <a href="https://groups.google.com/u/1/a/urbit.org/g/dev/c/7hm3MGsmL_4">spanking-new</a> software suite for running an Urbit-native bittorrent tracker, developed by <code>~palfun-foslup</code> with <code>~paldev</code>. (Astute readers may note the <a href="https://github.com/WhatCD/Gazelle">sly</a> <a href="https://github.com/WhatCD/Ocelot">references</a>.)</p>
<p>This is both a tracker and a command line interface for users to post and retrieve magnet links, which hooks into Urbit&rsquo;s identity system, and is written in a combined ~1,400(!) lines of Hoon, the Urbit system programming language.</p>
<p>Note that this is not a client for downloading torrents; think of it like a torrent site you can only access through your dojo.</p>
<p><a href=""><img src="/img/duiker-cli.png" alt=""></a></p>
<h2 id="duiker">%duiker<a href="#duiker" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p><a href="https://github.com/Fang-/suite/blob/master/app/duiker.hoon">%duiker</a> is the frontend pictured above. Right now, you can use your urbit to connect to <code>~paldev</code>'s %serval instance and add or retrieve magnet links by running this in your dojo:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~sampel-palnet:dojo>&nbsp;|link&nbsp;~paldev&nbsp;%duiker</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p>This will drop you right into the tracker; press <code>?</code> and it will provide you with a hefty wall of text on how to use it! The basic navigation is pretty simple, you can list torrents and page through them:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>.	reprint&nbsp;the&nbsp;file&nbsp;list</li>
        
        
        <li>r	refresh&nbsp;the&nbsp;file&nbsp;list</li>
        
        
        <li>[	previous&nbsp;page</li>
        
        
        <li>]	next&nbsp;page</li>
        
        
        <li><	first&nbsp;page</li>
        
        
        <li>>	last&nbsp;page</li>
        
        
        <li>0-9	view&nbsp;file&nbsp;details</li>
        
        
        <li>~paldev:duiker>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p>The UI automatically refreshes as you press the keys; it&rsquo;s a very retro-computing vibe.</p>
<p>As of writing there are only about a dozen torrents posted, so there isn&rsquo;t a lot to traverse. You can also perform searches by text, tags, and uploader (<code>@p</code>).</p>
<p>Switch back to dojo or cli-chat by pressing <code>ctrl-x</code>. If you&rsquo;re ready to disconnect your %duiker session, simply unlink in dojo:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~paldev:duiker>&nbsp;|unlink&nbsp;~paldev&nbsp;%duiker</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p>It&rsquo;s a little laggy, since you&rsquo;re basically connecting to a TTY, but I found it perfectly serviceable every time I&rsquo;ve played with it.</p>
<h2 id="serval">%serval<a href="#serval" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p><a href="https://github.com/fang-/suite/blob/master/app/serval.hoon">%serval</a> is the backend.  Under the hood, it&rsquo;s an HTTP torrent tracker. Like a traditional private tracker, you&rsquo;re given a private announce URL that&rsquo;s specific to your <code>@p</code>, which allows it to keep track of uploaders and up/down ratio per user. It also seems like it would be an easy thing to extend into invitation-only, or hook into other social software you&rsquo;re running with your friends.</p>
<p><code>~palfun</code> also mentions in the announcement post a potential future goal of allowing users to upload and download .torrent files through a web UI, to make it more functional as a proper private tracker. At the moment it works solely with magnet links, which typically don&rsquo;t even require trackers, but use DHT.</p>
<p>[<em>Jan 2021 update:</em> A new version of %serval now supports .torrent files &ndash; connecting to %serval in the web dojo allows you to download them.]</p>
<h2 id="adding-and-downloading-torrents">Adding and downloading torrents<a href="#adding-and-downloading-torrents" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>If you&rsquo;ve ever created a torrent before, none of this will be new &ndash; %duiker will print your private announce URL in the help menu you access with <code>?</code>. Use this URL to create a new torrent in your client of choice:</p>
<p><a href=""><img src="/img/create-torrent.png" alt=""></a></p>
<p>(<em>e. correction</em>) Do not mark the torrent private, as others will need to use DHT to download its metadata.</p>
<p>Once you&rsquo;ve created your torrent and begun seeding it in your client, right-click it and copy the magnet link. You&rsquo;ll need to use it to craft a nice long <code>;add</code> command to punch into %duiker, formatted as <code>;add magnetLink 'Title' 'description here' tag</code>, like so:</p>
<div class="window">
    <div class="titlebar">
      <div class="buttons">
        <div class="bclose">
        </div>
        <div class="minimize">
        </div>
        <div class="zoom">
        </div>
      </div>
      urbit - sampel-palnet
    </div>
    <div class="termdojo">
      <ul>
        
        
        <li></li>
        
        
        <li>~paldev:duiker>&nbsp;;add&nbsp;magnet:?xt=urn:btih:7221f09e518e4460203222131273bac81fd1caa0&dn=Fine%20Scale%20Modeler%20Magazines&tr=https%3a%2f%2furb.pal.dev%2f%serval%2f~sitful-hatred%2fy0uR4Nn0uNc3uRlH3Re%2fannounce&nbsp;'Fine&nbsp;Scale&nbsp;Modeler&nbsp;magazines'&nbsp;'a&nbsp;collection&nbsp;of&nbsp;PDFs&nbsp;related&nbsp;to&nbsp;skills&nbsp;and&nbsp;tips&nbsp;for&nbsp;building&nbsp;&&nbsp;painting&nbsp;scale&nbsp;models'&nbsp;pdf</li>
        
        
        <li>&nbsp;</li>
        
        
        <li></li>
        
        
        <li></li>
          
      </ul>
    </div>
  </div>

<p>I&rsquo;d recommend putting this together in a separate window, because scrolling back and forth inside the line buffer can be a bit of a pain. Once it&rsquo;s assembled, just paste it in and hit return. You can press <code>r</code> to see it in the list of torrents.</p>
<p><a href=""><img src="/img/torrent-list.png" alt=""></a></p>
<p>From here we can demonstrate downloading as well &ndash; note the far left column, with numbers next to each item. Just enter the number, and it will spit out the description and a magnet link to copy into your client.</p>
<p><a href=""><img src="/img/torrent-desc.png" alt=""></a></p>
<hr>
<p>In the comments of %serval, <code>~palfun</code> outlines a few of the technical hurdles that exist before an urbit torrent <em>client</em> is feasible (e.g &gt;2GB loom, a vane for raw TCP). This seems like it could be a possibility one day, but maybe not in the immediate future.</p>
<p>For the moment, with Urbit lacking a proper package manager, so installing this on your ship is a bit more involved than using it on <code>~paldev</code> &ndash; I haven&rsquo;t tried it, but I&rsquo;ll update this post with instructions if it&rsquo;s reasonably doable.</p>
<p>What I find most appealing about this project is the prospect of a simple community torrent tracker that you can spin up to go with your group chat; it demonstrates what kind of social software becomes possible when everybody has a server, and points to a new kind of localized internet; and it showcases the power of Urbit as a fully programmable computer that can interface with the rest of the internet. I find this kind of thing very exciting. Anyway, I uploaded a folder of cool French comics by a guy named Lewis Trondheim, you should hop on and grab them.</p>
<hr>
<p><em>This post is also available on Urbit, where you can post comments. Join <a href="web+urbitgraph://group/~matwet/networked-subject/">~matwet/networked-subject</a> and open the Networked Subject notebook.</em></p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://subject.network/tags/urbit">urbit</a></span><span class="tag"><a href="https://subject.network/tags/bittorrent">bittorrent</a></span><span class="tag"><a href="https://subject.network/tags/tracker">tracker</a></span><span class="tag"><a href="https://subject.network/tags/palfun-foslup">palfun-foslup</a></span><span class="tag"><a href="https://subject.network/tags/paldev">paldev</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-10-10 17:32 -0500</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="https://subject.network/posts/accepting-point/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Accepting an Azimuth point</span>
			</a>
			<a class="prev-post" href="https://subject.network/posts/mapping-the-heavens/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>Mapping the heavens</span>
			</a>
		</div>
		<div id="comments" class="thin">
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="/img/by-sa.svg" height=24px width=auto></a><p> 2021 <img src="/sitful-hatred.svg" height=24px width=24px style="vertical-align:middle;"><a href="https://subject.network">~sitful-hatred</a>
		</p>
	</footer>



	<script src="https://subject.network/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js" integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin="anonymous"></script>
	

</body>

</html>
